function Banners(){}Banners.prototype.loadData=function(){var r=this;xfzajax.get({url:"/cms/banner_list/",success:function(n){if(200===n.code){var e=n.data;console.log(e);for(var a=0;a<e.length;a++){var t=e[a];r.createBannerItem(t)}}}})},Banners.prototype.createBannerItem=function(n){var e=this,a=template("banner-item",{banner:n}),t=$(".banner-list-group"),r=null;r=n?(t.append(a),t.find(".banner-item:last")):(t.prepend(a),t.find(".banner-item:first")),e.addImageSelectEvent(r),e.addRemoveBannerEvent(r),e.addSaveBannerEvent(r)},Banners.prototype.listenAddBannerEvent=function(){var n=this;$("#add-banner-btn").click(function(){6<=$(".banner-list-group").children().length?window.messageBox.showInfo("最多只能添加6张轮播图！"):n.createBannerItem()})},Banners.prototype.addImageSelectEvent=function(n){var a=n.find(".thumbnail"),e=n.find(".image-input");a.click(function(){e.click()}),e.change(function(){var n=this.files[0],e=new FormData;e.append("file",n),xfzajax.post({url:"/cms/upload_file/",data:e,processData:!1,contentType:!1,success:function(n){if(200===n.code){var e=n.data.url;a.attr("src",e)}}})})},Banners.prototype.addRemoveBannerEvent=function(e){e.find(".close-btn").click(function(){var n=e.attr("data-banner-id");n?xfzalert.alertConfirm({text:"您确定要删除这个轮播图吗?",confirmCallback:function(){xfzajax.post({url:"/cms/delete_banner/",data:{banner_id:n},success:function(n){200===n.code&&(e.remove(),window.messageBox.showSuccess("轮播图删除才成功！"))}})}}):e.remove()})},Banners.prototype.addSaveBannerEvent=function(t){var n=t.find(".save-btn"),r=t.find(".thumbnail"),i=t.find("input[name='priority']"),o=t.find("input[name='link_to']"),s=t.find('span[class="priority"]'),c=t.attr("data-banner-id"),d="";d=c?"/cms/edit_banner/":"/cms/add_banner/",n.click(function(){var n=r.attr("src"),e=i.val(),a=o.val();xfzajax.post({url:d,data:{image_url:n,priority:e,link_to:a,pk:c},success:function(n){200===n.code&&(c?window.messageBox.showSuccess("轮播图修改成功！"):(c=n.data.banner_id,t.attr("data-banner-id",c),window.messageBox.showSuccess("轮播图添加完成！")),s.text("优先级："+e))}})})},Banners.prototype.run=function(){this.listenAddBannerEvent(),this.loadData()},$(function(){(new Banners).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhbm5lcnMuanMiXSwibmFtZXMiOlsiQmFubmVycyIsInByb3RvdHlwZSIsImxvYWREYXRhIiwic2VsZiIsInRoaXMiLCJ4ZnphamF4IiwiZ2V0IiwidXJsIiwic3VjY2VzcyIsInJlc3VsdCIsImJhbm5lcnMiLCJjb25zb2xlIiwibG9nIiwiaSIsImxlbmd0aCIsImJhbm5lciIsImNyZWF0ZUJhbm5lckl0ZW0iLCJ0cGwiLCJ0ZW1wbGF0ZSIsImJhbm5lckxpc3RHcm91cCIsIiQiLCJiYW5uZXJJdGVtIiwiYXBwZW5kIiwiZmluZCIsInByZXBlbmQiLCJhZGRJbWFnZVNlbGVjdEV2ZW50IiwiYWRkUmVtb3ZlQmFubmVyRXZlbnQiLCJhZGRTYXZlQmFubmVyRXZlbnQiLCJsaXN0ZW5BZGRCYW5uZXJFdmVudCIsImNsaWNrIiwiY2hpbGRyZW4iLCJ3aW5kb3ciLCJtZXNzYWdlQm94Iiwic2hvd0luZm8iLCJpbWFnZSIsImltYWdlSW5wdXQiLCJjaGFuZ2UiLCJmaWxlIiwiZmlsZXMiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwicG9zdCIsImRhdGEiLCJwcm9jZXNzRGF0YSIsImNvbnRlbnRUeXBlIiwiYXR0ciIsImJhbm5lcklkIiwieGZ6YWxlcnQiLCJhbGVydENvbmZpcm0iLCJ0ZXh0IiwiY29uZmlybUNhbGxiYWNrIiwiYmFubmVyX2lkIiwicmVtb3ZlIiwic2hvd1N1Y2Nlc3MiLCJzYXZlQnRuIiwiaW1hZ2VUYWciLCJwcmlvcml0eVRhZyIsImxpbmt0b1RhZyIsInByaW9yaXR5U3BhbiIsImltYWdlX3VybCIsInByaW9yaXR5IiwidmFsIiwibGlua190byIsInBrIiwicnVuIl0sIm1hcHBpbmdzIjoiQUFDQSxTQUFTQSxXQUlUQSxRQUFRQyxVQUFVQyxTQUFXLFdBQ3pCLElBQUlDLEVBQU9DLEtBQ1hDLFFBQVFDLElBQUksQ0FDUkMsSUFBTyxvQkFDUEMsUUFBVyxTQUFVQyxHQUNqQixHQUFzQixNQUFuQkEsRUFBYSxLQUFVLENBQ3RCLElBQUlDLEVB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QVFDLFVBQVUrRCxJQUFNLFdBQ3BCNUQsS0FBS3dCLHVCQUNMeEIsS0FBS0YsWUFHVGtCLEVBQUUsWUFDZ0IsSUFBSXBCLFNBQ1ZnRSIsImZpbGUiOiJiYW5uZXJzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5mdW5jdGlvbiBCYW5uZXJzKCkge1xyXG5cclxufVxyXG5cclxuQmFubmVycy5wcm90b3R5cGUubG9hZERhdGEgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB4ZnphamF4LmdldCh7XHJcbiAgICAgICAgJ3VybCc6ICcvY21zL2Jhbm5lcl9saXN0LycsXHJcbiAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xyXG4gICAgICAgICAgICAgICAgdmFyIGJhbm5lcnMgPSByZXN1bHRbJ2RhdGEnXTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGJhbm5lcnMpO1xyXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpPTA7IGk8YmFubmVycy5sZW5ndGg7aSsrKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYmFubmVyID0gYmFubmVyc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmNyZWF0ZUJhbm5lckl0ZW0oYmFubmVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59O1xyXG5cclxuQmFubmVycy5wcm90b3R5cGUuY3JlYXRlQmFubmVySXRlbSA9IGZ1bmN0aW9uIChiYW5uZXIpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciB0cGwgPSB0ZW1wbGF0ZShcImJhbm5lci1pdGVtXCIse1wiYmFubmVyXCI6YmFubmVyfSk7XHJcbiAgICB2YXIgYmFubmVyTGlzdEdyb3VwID0gJChcIi5iYW5uZXItbGlzdC1ncm91cFwiKTtcclxuXHJcbiAgICB2YXIgYmFubmVySXRlbSA9IG51bGw7XHJcbiAgICBpZihiYW5uZXIpe1xyXG4gICAgICAgIGJhbm5lckxpc3RHcm91cC5hcHBlbmQodHBsKTtcclxuICAgICAgICBiYW5uZXJJdGVtID0gYmFubmVyTGlzdEdyb3VwLmZpbmQoXCIuYmFubmVyLWl0ZW06bGFzdFwiKTtcclxuICAgIH1lbHNle1xyXG4gICAgICAgIGJhbm5lckxpc3RHcm91cC5wcmVwZW5kKHRwbCk7XHJcbiAgICAgICAgYmFubmVySXRlbSA9IGJhbm5lckxpc3RHcm91cC5maW5kKFwiLmJhbm5lci1pdGVtOmZpcnN0XCIpO1xyXG4gICAgfVxyXG4gICAgc2VsZi5hZGRJbWFnZVNlbGVjdEV2ZW50KGJhbm5lckl0ZW0pO1xyXG4gICAgc2VsZi5hZGRSZW1vdmVCYW5uZXJFdmVudChiYW5uZXJJdGVtKTtcclxuICAgIHNlbGYuYWRkU2F2ZUJhbm5lckV2ZW50KGJhbm5lckl0ZW0pO1xyXG59O1xyXG5cclxuQmFubmVycy5wcm90b3R5cGUubGlzdGVuQWRkQmFubmVyRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgYWRkQnRuID0gJChcIiNhZGQtYmFubmVyLWJ0blwiKTtcclxuICAgIGFkZEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGJhbm5lckxpc3RHcm91cCA9ICQoJy5iYW5uZXItbGlzdC1ncm91cCcpO1xyXG4gICAgICAgIHZhciBsZW5ndGggPSBiYW5uZXJMaXN0R3JvdXAuY2hpbGRyZW4oKS5sZW5ndGg7XHJcbiAgICAgICAgaWYobGVuZ3RoID49IDYpe1xyXG4gICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93SW5mbygn5pyA5aSa5Y+q6IO95re75YqgNuW8oOi9ruaSreWbvu+8gScpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYuY3JlYXRlQmFubmVySXRlbSgpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5CYW5uZXJzLnByb3RvdHlwZS5hZGRJbWFnZVNlbGVjdEV2ZW50ID0gZnVuY3Rpb24gKGJhbm5lckl0ZW0pIHtcclxuICAgIHZhciBpbWFnZSA9IGJhbm5lckl0ZW0uZmluZCgnLnRodW1ibmFpbCcpO1xyXG4gICAgdmFyIGltYWdlSW5wdXQgPSBiYW5uZXJJdGVtLmZpbmQoJy5pbWFnZS1pbnB1dCcpO1xyXG4gICAgLy8g5Zu+54mH5piv5LiN6IO95aSf5omT5byA5paH5Lu26YCJ5oup5qGG55qE77yM5Y+q6IO96YCa6L+HaW5wdXRbdHlwZT0nZmlsZSddXHJcbiAgICBpbWFnZS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaW1hZ2VJbnB1dC5jbGljaygpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaW1hZ2VJbnB1dC5jaGFuZ2UoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBmaWxlID0gdGhpcy5maWxlc1swXTtcclxuICAgICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcclxuICAgICAgICBmb3JtRGF0YS5hcHBlbmQoXCJmaWxlXCIsZmlsZSk7XHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgJ3VybCc6ICcvY21zL3VwbG9hZF9maWxlLycsXHJcbiAgICAgICAgICAgICdkYXRhJzogZm9ybURhdGEsXHJcbiAgICAgICAgICAgICdwcm9jZXNzRGF0YSc6IGZhbHNlLFxyXG4gICAgICAgICAgICAnY29udGVudFR5cGUnOiBmYWxzZSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gcmVzdWx0WydkYXRhJ11bJ3VybCddO1xyXG4gICAgICAgICAgICAgICAgICAgIGltYWdlLmF0dHIoJ3NyYycsdXJsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5CYW5uZXJzLnByb3RvdHlwZS5hZGRSZW1vdmVCYW5uZXJFdmVudCA9IGZ1bmN0aW9uIChiYW5uZXJJdGVtKSB7XHJcbiAgICB2YXIgY2xvc2VCdG4gPSBiYW5uZXJJdGVtLmZpbmQoJy5jbG9zZS1idG4nKTtcclxuXHJcbiAgICBjbG9zZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGJhbm5lcklkID0gYmFubmVySXRlbS5hdHRyKCdkYXRhLWJhbm5lci1pZCcpO1xyXG4gICAgICAgIGlmKGJhbm5lcklkKXtcclxuICAgICAgICAgICAgeGZ6YWxlcnQuYWxlcnRDb25maXJtKHtcclxuICAgICAgICAgICAgICAgICd0ZXh0JzogJ+aCqOehruWumuimgeWIoOmZpOi/meS4qui9ruaSreWbvuWQlz8nLFxyXG4gICAgICAgICAgICAgICAgJ2NvbmZpcm1DYWxsYmFjayc6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAndXJsJzogJy9jbXMvZGVsZXRlX2Jhbm5lci8nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiYW5uZXJfaWQnOiBiYW5uZXJJZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbm5lckl0ZW0ucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd1N1Y2Nlc3MoJ+i9ruaSreWbvuWIoOmZpOaJjeaIkOWKn++8gScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBiYW5uZXJJdGVtLnJlbW92ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59O1xyXG5cclxuQmFubmVycy5wcm90b3R5cGUuYWRkU2F2ZUJhbm5lckV2ZW50ID0gZnVuY3Rpb24gKGJhbm5lckl0ZW0pIHtcclxuICAgIHZhciBzYXZlQnRuID0gYmFubmVySXRlbS5maW5kKCcuc2F2ZS1idG4nKTtcclxuICAgIHZhciBpbWFnZVRhZyA9IGJhbm5lckl0ZW0uZmluZChcIi50aHVtYm5haWxcIik7XHJcbiAgICB2YXIgcHJpb3JpdHlUYWcgPSBiYW5uZXJJdGVtLmZpbmQoXCJpbnB1dFtuYW1lPSdwcmlvcml0eSddXCIpO1xyXG4gICAgdmFyIGxpbmt0b1RhZyA9IGJhbm5lckl0ZW0uZmluZChcImlucHV0W25hbWU9J2xpbmtfdG8nXVwiKTtcclxuICAgIHZhciBwcmlvcml0eVNwYW4gPSBiYW5uZXJJdGVtLmZpbmQoJ3NwYW5bY2xhc3M9XCJwcmlvcml0eVwiXScpO1xyXG4gICAgdmFyIGJhbm5lcklkID0gYmFubmVySXRlbS5hdHRyKFwiZGF0YS1iYW5uZXItaWRcIik7XHJcbiAgICB2YXIgdXJsID0gJyc7XHJcbiAgICBpZihiYW5uZXJJZCl7XHJcbiAgICAgICAgdXJsID0gJy9jbXMvZWRpdF9iYW5uZXIvJztcclxuICAgIH1lbHNle1xyXG4gICAgICAgIHVybCA9ICcvY21zL2FkZF9iYW5uZXIvJztcclxuICAgIH1cclxuICAgIHNhdmVCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBpbWFnZV91cmwgPSBpbWFnZVRhZy5hdHRyKCdzcmMnKTtcclxuICAgICAgICB2YXIgcHJpb3JpdHkgPSBwcmlvcml0eVRhZy52YWwoKTtcclxuICAgICAgICB2YXIgbGlua190byA9IGxpbmt0b1RhZy52YWwoKTtcclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzogdXJsLFxyXG4gICAgICAgICAgICAnZGF0YSc6e1xyXG4gICAgICAgICAgICAgICAgJ2ltYWdlX3VybCc6IGltYWdlX3VybCxcclxuICAgICAgICAgICAgICAgICdwcmlvcml0eSc6IHByaW9yaXR5LFxyXG4gICAgICAgICAgICAgICAgJ2xpbmtfdG8nOiBsaW5rX3RvLFxyXG4gICAgICAgICAgICAgICAgJ3BrJzogYmFubmVySWRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZihyZXN1bHRbJ2NvZGUnXSA9PT0gMjAwKXtcclxuICAgICAgICAgICAgICAgICAgICBpZihiYW5uZXJJZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3dTdWNjZXNzKCfova7mkq3lm77kv67mlLnmiJDlip/vvIEnKTtcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFubmVySWQgPSByZXN1bHRbJ2RhdGEnXVsnYmFubmVyX2lkJ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhbm5lckl0ZW0uYXR0cignZGF0YS1iYW5uZXItaWQnLGJhbm5lcklkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm1lc3NhZ2VCb3guc2hvd1N1Y2Nlc3MoJ+i9ruaSreWbvua3u+WKoOWujOaIkO+8gScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBwcmlvcml0eVNwYW4udGV4dChcIuS8mOWFiOe6p++8mlwiK3ByaW9yaXR5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5CYW5uZXJzLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmxpc3RlbkFkZEJhbm5lckV2ZW50KCk7XHJcbiAgICB0aGlzLmxvYWREYXRhKCk7XHJcbn07XHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBiYW5uZXJzID0gbmV3IEJhbm5lcnMoKTtcclxuICAgIGJhbm5lcnMucnVuKCk7XHJcbn0pOyJdfQ==
